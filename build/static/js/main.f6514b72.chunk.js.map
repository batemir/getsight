{"version":3,"sources":["Components/Product.js","index.js"],"names":["Product","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","addAttr","node","setAttribute","uniqueId","state","inputValue","goldPrice","goldPriceAlt","retailPrice","retailPriceAlt","incrementGold","incrementRetail","handleClick","bind","assertThisInitialized","handleInput","arrowClick","e","preventDefault","target","classList","contains","setState","parentNode","getElementsByClassName","item","remove","add","value","console","log","react_default","a","createElement","className","src","img","alt","code","title","keywords","status","id","onClick","ratio","type","onChange","ref","React","Component","root","document","getElementById","fetch","method","then","res","json","data","tags","map","product","imgUrl","primaryImageUrl","newUrl","concat","slice","length","isActive","Product_Product","productId","assocProducts","priceGold","priceRetail","Math","round","priceGoldAlt","priceRetailAlt","unitRatioAlt","toFixed","ReactDOM","render","run"],"mappings":"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","file":"static/js/main.f6514b72.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport default class Product extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            inputValue: 1,\r\n            goldPrice: this.props.goldPriceAlt,\r\n            retailPrice: this.props.retailPriceAlt,\r\n            incrementGold: this.props.goldPriceAlt,\r\n            incrementRetail: this.props.retailPriceAlt,\r\n        }\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleInput = this.handleInput.bind(this);\r\n        this.arrowClick = this.arrowClick.bind(this);\r\n        this.addAttr = this.addAttr.bind(this);     \r\n    }\r\n    addAttr = (node) => {\r\n        node.setAttribute('data-product-id', this.props.uniqueId);\r\n    }\r\n    handleClick(e) {\r\n        e.preventDefault();\r\n        if (e.target.classList.contains('m')) {\r\n            this.setState({incrementGold: this.props.goldPriceAlt,\r\n                incrementRetail: this.props.retailPriceAlt});\r\n            this.setState({goldPrice: this.props.goldPriceAlt * this.state.inputValue,\r\n                retailPrice: this.props.retailPriceAlt * this.state.inputValue});\r\n        } else {\r\n            this.setState({incrementGold: this.props.goldPrice,\r\n            incrementRetail: this.props.retailPrice});\r\n            this.setState({goldPrice: this.props.goldPrice * this.state.inputValue,\r\n                retailPrice: this.props.retailPrice * this.state.inputValue});\r\n        }\r\n        const active = e.target.parentNode.getElementsByClassName('active').item(0);\r\n        active.classList.remove('active');\r\n        e.target.classList.add('active');\r\n    }\r\n\r\n    handleInput(e) {\r\n        e.preventDefault();\r\n        this.setState({inputValue: e.target.value});\r\n    }\r\n\r\n    arrowClick(e) {\r\n        e.preventDefault();\r\n        console.log(this.state.retailPrice, this.state.incrementRetail);\r\n        if (e.target.classList.contains('up')) {\r\n            this.setState({inputValue: this.state.inputValue + 1,\r\n            goldPrice: this.state.goldPrice + this.state.incrementGold,\r\n            retailPrice: this.state.retailPrice + this.state.incrementRetail });\r\n        } else {\r\n            this.setState({inputValue: this.state.inputValue - 1,\r\n            goldPrice: this.state.goldPrice - this.state.incrementGold,\r\n            retailPrice: this.state.retailPrice - this.state.incrementRetail });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"product-container\">\r\n                <div className=\"product-photo product\"><img src={this.props.img} alt=\"\"/></div>\r\n                <div className=\"second-block\">\r\n                    <span className=\"product-code product\">{this.props.code}</span>\r\n                    <div className=\"product-description product\">{this.props.title}</div>\r\n                    <div className=\"product-keywords product\">\r\n                        <span>Могут понадобиться: </span>{this.props.keywords}\r\n                    </div>\r\n                </div>\r\n                <div className=\"third-block\">\r\n                    <div className=\"product-status product\">\r\n                        <span>{this.props.status}</span><br/>\r\n                    </div>\r\n                    <div className=\"product-price product\">\r\n                        По карте клуба: <span>{this.state.goldPrice}</span><span className=\"icon-rouble\"></span><br/>\r\n                        <span className=\"gray\">{this.state.retailPrice}</span><span className=\"icon-rouble gray\"></span>\r\n                    </div>\r\n                    <div id=\"select\" onClick={this.handleClick}>\r\n                        <div className=\"select m active\">За м. кв.</div>\r\n                        <div className=\"select p\">За упаковку</div>\r\n                    </div>\r\n                    <div className=\"help\">\r\n                        <div className=\"icon-x\"></div>\r\n                        <div className=\"help-text\">Продается упаковками:<br/> 1 упак. = {this.props.ratio} м. кв.</div>\r\n                    </div>\r\n                    <div className=\"product-count\">\r\n                        <input type=\"text\" value={this.state.inputValue} onChange={this.handleInput}/>\r\n                        <span className=\"arrow up\" onClick={this.arrowClick}></span>\r\n                        <span className=\"arrow down\" onClick={this.arrowClick}></span>  \r\n                    </div>\r\n                    <div className=\"basket\" ref={this.addAttr}>\r\n                        <span className=\"icon-basket\"></span>\r\n                        <span>В корзину</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './css/style.css';\r\nimport './css/fontello.css';\r\nimport './css/fontello-embedded.css';\r\nimport Product from './Components/Product';\r\n\r\nconst root = document.getElementById('root');\r\n\r\nconst run = (data) => {\r\n    const tags = data.map((product) => {\r\n        const imgUrl = product.primaryImageUrl;\r\n        const newUrl = `${imgUrl.slice(0, imgUrl.length - 4)}_220x220_1.jpg`;\r\n        const code = `Код: ${product.code.slice(5)}`;\r\n        const status = product.isActive ? 'Наличие' : 'Нет в наличии';\r\n        return <Product uniqueId={product.productId} code={code}\r\n        title={product.title} img={newUrl} keywords={product.assocProducts}\r\n        status={status} goldPrice={product.priceGold} retailPrice={product.priceRetail}\r\n        goldPriceAlt={Math.round(product.priceGoldAlt)} retailPriceAlt={Math.round(product.priceRetailAlt)}\r\n        ratio={(1 / product.unitRatioAlt).toFixed(2) }/>;\r\n    });\r\n    ReactDOM.render(tags, root);\r\n};\r\n\r\nfetch('products.json', {method: 'GET'})\r\n    .then(res => res.json()).then(data => {\r\n        run(data);\r\n});"],"sourceRoot":""}